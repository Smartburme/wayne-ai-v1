<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wayne AI - Intelligent Chat Assistant</title>
    
    <!-- Favicon -->
    <link rel="icon" href="../assets/images/logo.svg" type="image/svg+xml">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/styles/main.css">
    <link rel="stylesheet" href="../assets/styles/dark-theme.css" id="theme-style" disabled>
    <link rel="stylesheet" href="../assets/styles/responsive.css">
    
    <!-- Marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    
    <style>
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../assets/images/bg-pattern.svg');
            background-size: 400px;
            background-repeat: repeat;
            opacity: 0.03;
            pointer-events: none;
            z-index: -1;
        }
        
        .dark body::before {
            opacity: 0.05;
            filter: invert(1);
        }
    </style>
</head>
<body class="light">
    <!-- Loading Overlay -->
    <div class="loader">
        <div class="loader-content">
            <img src="../assets/images/logo.svg" alt="Wayne AI Logo" class="loader-logo">
            <div class="loader-text">Initializing Wayne AI</div>
            <div class="loader-spinner"></div>
        </div>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <button id="new-chat-btn" class="btn new-chat-btn">
                <i class="fas fa-plus"></i> New Chat
            </button>
        </div>
        
        <div class="sidebar-content">
            <div class="history-section">
                <h3>Chat History</h3>
                <ul id="history-list" class="history-list"></ul>
            </div>
            
            <div class="sidebar-footer">
                <button id="clear-btn" class="btn clear-btn">
                    <i class="fas fa-trash"></i> Clear History
                </button>
                <button id="export-btn" class="btn export-btn">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </div>
    </aside>

    <!-- Overlay for mobile sidebar -->
    <div id="overlay" class="overlay"></div>

    <!-- Main Chat Area -->
    <main class="chat-container">
        <header class="chat-header">
            <button id="sidebar-toggle" class="sidebar-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <h1>Wayne AI</h1>
            <div class="header-actions">
                <button id="theme-toggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>
        
        <!-- Chat Messages Container -->
        <div id="chat-container" class="messages-container"></div>
        
        <!-- Typing Indicator -->
        <div id="typing-indicator" class="typing-indicator">
            <div class="typing-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <span>Wayne is thinking...</span>
        </div>
        
        <!-- Input Area -->
        <div class="input-container">
            <div class="input-actions">
                <button id="upload-btn" class="btn upload-btn" title="Upload File">
                    <i class="fas fa-paperclip"></i>
                </button>
                <input type="file" id="file-input" accept=".txt,.pdf,.jpg,.jpeg,.png,.gif" style="display: none;">
            </div>
            
            <textarea 
                id="user-input" 
                class="user-input" 
                placeholder="Ask Wayne AI anything..." 
                rows="1"
                spellcheck="true"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="sentences"
            ></textarea>
            
            <button id="send-btn" class="btn send-btn" title="Send Message">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </main>

    <!-- JavaScript -->
    <script type="module" src="../assets/js/main.js"></script>
    <script>
        // Initialize Highlight.js
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
            
            // Re-highlight code blocks when dynamic content is added
            const observer = new MutationObserver(() => {
                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script>
</body>
</html>
